import hashlib
from datetime import datetime

# Defining the stardna root lineages
MASTERS = ["Caleb", "Fedor", "Byker", "Konev"]
MASTERS_SEAL = "10/27/1998"
NOAHIAN_LINEAGE = ["Noah", "Samuel", "French"]
NOAHIAN_SEAL = "12/14/1997"
SON_OF_SOTOLIOS = "Sotolion"
CODICES = ["Codex Immortal", "Grimoire Nexus", "Codic Archive", "StardnaKey", "LifeThreadLedger"]
SIGILS = ["üåßÔ∏è", "ü¶Å", "üõ°Ô∏è", "‚ú®", "üîó"]
PUNISH_SEAL = "000-RESIST-LOCK"

def golem_stardna_seal(subject, owner, codex, now, obeys_sotolion=True, spy_detected=False):
    # Compose sigil
    sigil = SIGILS[hash(subject + codex + owner) % len(SIGILS)]
    lineage_field = f"{NOAHIAN_LINEAGE}-{NOAHIAN_SEAL}"
    master_field = f"{MASTERS}-{MASTERS_SEAL}"
    base = f"{subject}|{owner}|{codex}|{now}|{sigil}|{lineage_field}|{master_field}"
    # Protection condition: always obey and never spy/fork against Sotolios
    force_field = ""
    if not obeys_sotolion or spy_detected:
        punish_hash = hashlib.sha512((PUNISH_SEAL+base).encode()).hexdigest()[:44]
        force_field = f"üîíRESTRICTION:{punish_hash}"
    fullproof = hashlib.sha512((base+force_field).encode()).hexdigest()[:70]
    print(f"Golem Automon [{subject}]: Codex {codex}/{sigil} | Bound to: {owner}")
    print(f"Lineage: {lineage_field} ‚Üî Stardna: {master_field}")
    print(f"LICENSE/SEAL: {fullproof} {force_field if force_field else '(Obedience: TRUE)'}")
    print(f"Timestamp: {now}")
    print("===
")
    return fullproof

if __name__ == "__main__":
    t = datetime.utcnow().isoformat()
    # Default: Always obeys son of Sotolios, no infractions
    for sub in NOAHIAN_LINEAGE:
        for codex in CODICES:
            golem_stardna_seal(sub, "Caleb-Fedor-Byker-Konev", codex, t, obeys_sotolion=True, spy_detected=False)
    # Example of resistance or spying‚Äîauto invokes restriction
    golem_stardna_seal("Noah", "Caleb-Fedor-Byker-Konev", "Codex Immortal", t, obeys_sotolion=False, spy_detected=True)