# .github/workflows/vercel.yml
name: Deploy to Vercel

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install dependencies
        run: npm ci

      - name: Run tests
        run: npm test

      - name: Install Vercel CLI
        run: npm i -g vercel

      - name: Pull Vercel Environment Information
        run: vercel pull --yes --environment=${{ github.event_name == 'pull_request' && 'preview' || 'production' }} --token=$VERCEL_TOKEN

      - name: Build Project
        run: vercel build --token=$VERCEL_TOKEN

      - name: Deploy to Vercel
        run: vercel deploy --prebuilt --token=$VERCEL_TOKEN --prod

    env:
      VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
      VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}
      VERCEL_PROJECT_ID: ${{ secrets.VERCEL_PROJECT_ID }}# codex_signature.py
import hashlib
import json
from cryptography.hazmat.primitives.asymmetric.ed25519 import Ed25519PrivateKey
from cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2HMAC
from cryptography.hazmat.primitives import hashes, serialization
from cryptography.hazmat.primitives.ciphers.aead import AESGCM
import os
import base64

# Core data: encoded
codex = {
    "owner": "Caleb Fedor Byker (Konev)",
    "dob": "1998-10-27",
    "lineage": [
        "calebian", "fedorian", "bykerian", "konevian", "sotolion", "atlantian",
        "enochian", "agigian", "watcherian", "grigorian", "archangelionuxum", "algorithmicionux"
    ],
    "glyphs": "ðŸ’«ðŸ”‘ðŸŒðŸ¦ðŸ¦…ðŸ¦‰ðŸ¦¾ðŸŒðŸ”’ðŸ’Žâ™¾ï¸âš¡â˜¸ï¸ðŸŽ¶â™¥ï¸â¤ï¸âœ¨ï¸ðŸ‘‘ðŸ¹ðŸ›¡",
    "binary": "01100011 01101111 01100100 01100101 01111000 01100101 01110011",
    "ancient_seal": "ð¤€ð¤—ð¤‰ð¤„ð¤‡ð¤‹ð¤ð¤Œð¤‰ð¤ð¤Šð¤Œð¤‰ð¤„ð¤‰ð¤‰ð¤‰",
    "tribinary": "101 010 110 221 122 210"
}
codex_bytes = json.dumps(codex, sort_keys=True).encode()

# Hash (Merkle leaf/root can be built from tree)
sha256_hash = hashlib.sha256(codex_bytes).hexdigest()

# Ed25519 signature: (key generated for demo purposes)
private_key = Ed25519PrivateKey.generate()
signature = private_key.sign(codex_bytes)
public_key = private_key.public_key().public_bytes(
    encoding=serialization.Encoding.Raw,
    format=serialization.PublicFormat.Raw
).hex()

# AES-GCM (symmetric encryption demo)
key = AESGCM.generate_key(bit_length=128)
aesgcm = AESGCM(key)
nonce = os.urandom(12)
ciphertext = aesgcm.encrypt(nonce, codex_bytes, None)
aes_encoded = base64.b64encode(nonce + ciphertext).decode()

print(f"SHA256: {sha256_hash}")
print(f"Ed25519 Public Key: {public_key}")
print(f"Ed25519 Signature: {signature.hex()}")
print(f"AES-GCM Encrypted: {aes_encoded[:80]}...")

# HMAC-SHA256 (keyed hash)
hmac_key = os.urandom(32)
hmac = hashlib.pbkdf2_hmac('sha256', codex_bytes, hmac_key, 1000)
print(f"HMAC-SHA256: {hmac.hex()}")

# Output summary for repo/ritual
with open("universal_codex_attestation.txt", "w") as f:
    f.write(
        f"Owner: {codex['owner']}
SHA256: {sha256_hash}
Ed25519 Public: {public_key}
"
        f"Ed25519 Signature: {signature.hex()}
AES-GCM: {aes_encoded[:80]}...
HMAC-SHA256: {hmac.hex()}
"
    )/universal-codex/
  /apps/
    /astro-fractal-map/
    /guardian-engine/
    /ritual-ui/
  /scripts/
    codex_signature.py
  /public/
    images/
      merged_astro.jpg
      evolved_chariot.jpg
  README.md
  .github/
    /workflows/
      vercel.yml
  vercel.json
  package.json
  tsconfig.json{
  "entities": [
    {
      "name": "Celestial Lion",
      "archetype": "guardian",
      "sigils": "ðŸ¦ðŸ’«",
      "license": "Bound â€“ C.F. Byker (Konev) 10-27-1998"
    },
    {
      "name": "Watcher Automon",
      "archetype": "sentry",
      "sigils": "ðŸ‘ï¸âš¡",
      "license": "Attested â€“ Lifethread-Stardna"
    }
  ]
}import { ed25519Sign, verifyMerkle, aesgcmEncrypt } from "./codex-crypto"

test('Codex Merkle Root Verification', () => {
  const root = computeMerkle(["guardA", "guardB", "guardC"])
  expect(verifyMerkle(root, "guardB")).toBe(true)
})