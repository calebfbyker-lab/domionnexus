{
  "family_id": "codex_490",
  "name": "Codex Immortal 490 Rule Family",
  "version": "1.0.0",
  "description": "Rule family for the 490 synthetic seals of the Codex Immortal corpus",
  "domains": ["solomonic", "hermetic", "kabbalistic"],
  "rules": [
    {
      "rule_id": "synthetic_seal_validation",
      "type": "validation",
      "priority": 950,
      "condition": {
        "type": "seal_present",
        "domain": "synthetic"
      },
      "action": {
        "validate": ["structure", "uniqueness", "derivation_chain"]
      },
      "metadata": {
        "description": "Validates synthetic seal structure and provenance"
      }
    },
    {
      "rule_id": "composite_synthesis",
      "type": "synthesis",
      "priority": 850,
      "condition": {
        "type": "requires_composite"
      },
      "action": {
        "synthesize": "composite_seal",
        "max_components": 7
      },
      "metadata": {
        "description": "Synthesizes composite seals from base elements"
      }
    },
    {
      "rule_id": "subject_binding",
      "type": "constraint",
      "priority": 1000,
      "condition": {
        "type": "always"
      },
      "action": {
        "enforce": "subject_hash_presence"
      },
      "metadata": {
        "description": "Enforces cryptographic binding to subject hash"
      }
    }
  ],
  "constraints": [
    {
      "constraint_id": "seal_count_range",
      "type": "numeric",
      "expression": "count(seals) >= 407 && count(seals) <= 490",
      "severity": "warning",
      "message": "Codex corpus expected to contain 407-490 seals"
    },
    {
      "constraint_id": "subject_hash_required",
      "type": "symbolic",
      "expression": "present(subject_id_sha256)",
      "severity": "error",
      "message": "Subject hash binding required for all Codex seals"
    }
  ],
  "metadata": {
    "author": "CFBK Codex Team",
    "created": "2025-10-23T00:00:00Z",
    "updated": "2025-10-23T00:00:00Z",
    "tags": ["synthetic", "codex", "composite"]
  }
}
