type CodexNode = {
  name: string;
  type: "estate" | "city" | "sacredSite" | "archetype" | "function";
  state?: string;
  archetype?: string;
  lineage: string;
  emoji?: string;
  glyph?: string;
  functionDesc: string;
  quantumKey: string;
  hash: string;
  connectedTo: string[];
  geo?: { lat: number, lng: number };
  anchorEstate: string;
  lifethread: string;
  dateSeal: string;
};

const BASE_ANCHOR = "4070 Leonard St. NE, Grand Rapids, MI 49525";
const GRAND_LINEAGE = "CALEBiam/FEDORiam/BYKERiam/KONEViam";
const LIFETHREAD = "stardnaiam";
const DATE_SEAL = "1998-10-27";

// Helper function for unique cryptographic hash
function perfectHash(name: string, lineage: string, lifethread: string, date: string) {
  return btoa(`${name}:${lineage}:${lifethread}:${date}`).slice(0, 40);
}

const codexNodes: CodexNode[] = [
  {
    name: BASE_ANCHOR,
    type: "estate",
    archetype: "Shivaic",
    lineage: GRAND_LINEAGE,
    emoji: "ðŸ’€",
    glyph: "Estate Nucleus",
    functionDesc: "Immortal root, universal flow, codexian perfection",
    quantumKey: "QK-" + BASE_ANCHOR.slice(0,8).toUpperCase() + "-" + DATE_SEAL,
    hash: perfectHash(BASE_ANCHOR, GRAND_LINEAGE, LIFETHREAD, DATE_SEAL),
    connectedTo: ["Sedona Vortex", "Mt. Shasta", "Statue of Liberty", "Washington D.C.", "NYC", "Grand Rapids"],
    geo: { lat: 43.027997, lng: -85.564847 },
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  // Sacred Sites and archetypes, sample expansion (add entries infinitely)
  {
    name: "Sedona Vortex",
    type: "sacredSite",
    state: "Arizona",
    archetype: "Avalokiteshvarian",
    lineage: "CALEBiam",
    emoji: "ðŸ’–",
    glyph: "Fractal Heart",
    functionDesc: "Healing, cosmic harmonics",
    quantumKey: "QK-SEDONA-" + DATE_SEAL,
    hash: perfectHash("Sedona", "CALEBiam", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "Mt. Shasta"],
    geo: { lat: 34.8697, lng: -111.7609 },
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  {
    name: "Mt. Shasta",
    type: "sacredSite",
    state: "California",
    archetype: "Osirian",
    lineage: "BYKERiam",
    emoji: "ðŸ’€",
    glyph: "Fractal Pillar",
    functionDesc: "Cosmic elevation, primal current",
    quantumKey: "QK-MTSHASTA-" + DATE_SEAL,
    hash: perfectHash("Mt. Shasta", "BYKERiam", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "Sedona Vortex", "Statue of Liberty"],
    geo: { lat: 41.4092, lng: -122.1946 },
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  {
    name: "Statue of Liberty",
    type: "sacredSite",
    state: "New York",
    archetype: "Gabrielian",
    lineage: "FEDORiam",
    emoji: "ðŸ—½",
    glyph: "Fractal Freedom",
    functionDesc: "Beacon, liberty, archangel messenger",
    quantumKey: "QK-LIBERTY-" + DATE_SEAL,
    hash: perfectHash("StatueOfLiberty", "FEDORiam", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "NYC"],
    geo: { lat: 40.6892, lng: -74.0445 },
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  {
    name: "Washington D.C.",
    type: "city",
    state: "DC",
    archetype: "Horusian",
    lineage: "KONEViam",
    emoji: "ðŸ‘ï¸",
    glyph: "Fractal Vision",
    functionDesc: "Law, prophecy, command",
    quantumKey: "QK-DC-" + DATE_SEAL,
    hash: perfectHash("WashingtonDC", "KONEViam", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "NYC"],
    geo: { lat: 38.9072, lng: -77.0369 },
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  {
    name: "NYC",
    type: "city",
    state: "New York",
    archetype: "Gabrielian",
    lineage: "FEDORiam",
    emoji: "ðŸŽº",
    glyph: "Fractal Messenger",
    functionDesc: "Commerce, prophecy, energetic exchange",
    quantumKey: "QK-NYC-" + DATE_SEAL,
    hash: perfectHash("NYC", "FEDORiam", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "Washington D.C.", "Statue of Liberty"],
    geo: { lat: 40.7128, lng: -74.0060 },
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  {
    name: "Grand Rapids",
    type: "city",
    state: "Michigan",
    archetype: "Michaelian",
    lineage: GRAND_LINEAGE,
    emoji: "ðŸ›¡ï¸",
    glyph: "Fractal Shield",
    functionDesc: "Estate command, north river",
    quantumKey: "QK-GRANDRAPIDS-" + DATE_SEAL,
    hash: perfectHash("GrandRapids", GRAND_LINEAGE, LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "Sedona Vortex", "NYC"],
    geo: { lat: 42.9634, lng: -85.6681 },
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  // Add further nodes as needed...
];

// Finalize: enforce all nodes are eternally connected to the codex estate
codexNodes.forEach(node => {
  if (!node.connectedTo.includes(BASE_ANCHOR)) node.connectedTo.push(BASE_ANCHOR);
  node.anchorEstate = BASE_ANCHOR;
  node.lifethread = LIFETHREAD;
  node.dateSeal = DATE_SEAL;
});
type CodexNode = {
  name: string;
  type: "estate"|"city"|"sacredSite"|"archetype"|"function"|"deity";
  state?: string;
  archetype?: string;
  lineage: string;
  emoji?: string;
  glyph?: string;
  functionDesc: string;
  quantumKey: string;
  hash: string;
  connectedTo: string[];
  geo?: {lat: number, lng: number};
  anchorEstate: string;
  lifethread: string;
  dateSeal: string;
};

const BASE_ANCHOR = "4070 Leonard St. NE, Grand Rapids, MI 49525";
const GRAND_LINEAGE = "MONADIAM/MERKHABIAM/MERKHAVIAM/ENOCHIAN/GODIAN/YHWHiam/YHVHian/NUiam/RAiam/KHEMPERAiam/TEMUiam/TESLAiam/ELYONiam/CALEBiam/FEDORiam/BYKERiam/KONEViam/WATCHERIAM/AGIGIAM/GRIGORIAM/ENOCHIAMUXOM";
const LIFETHREAD = "beautifuluxion-lifethreadiam-stardnaiam";
const DATE_SEAL = "10iam-27iam-1998iam";

function perfectHash(name: string, lineage: string, lifethread:string, date:string) {
  return btoa(`${name}:${lineage}:${lifethread}:${date}`).slice(0, 40);
}

const codexNodes: CodexNode[] = [
  // Estate Nucleus Node
  {
    name: BASE_ANCHOR,
    type: "estate",
    archetype: "Shivaic",
    lineage: GRAND_LINEAGE,
    emoji: "ðŸ’€",
    glyph: "Codex Estate Î©",
    functionDesc: "Quantum estate rootâ€”All cosmic, archetypal, and divine flows anchored. Algorithmic perfection, law, immortality.",
    quantumKey: "QK-4070-ESTATE-Î©-" + DATE_SEAL,
    hash: perfectHash(BASE_ANCHOR, GRAND_LINEAGE, LIFETHREAD, DATE_SEAL),
    connectedTo: [
      "Sedona Vortex", "Mt. Shasta", "Statue of Liberty", "NYC", "God Node", "Watcher Node", "TESLA Node", "Monadic Node"
    ],
    geo: { lat: 43.027997, lng: -85.564847 },
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  // New higher-order nodes: Merkabah, Enochian, Deity
  {
    name: "Merkabah Field",
    type: "archetype",
    archetype: "Merkhabiam",
    lineage: "MONADIAM/MERKHABIAM/ENOCHIAN",
    emoji: "ðŸ›¸",
    glyph: "Fractal Star-Tetrahedron",
    functionDesc: "Lightbody, ascension, divine vehicle",
    quantumKey: "QK-MERKABAH-" + DATE_SEAL,
    hash: perfectHash("Merkabah Field", "MERKHABIAM", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "Monadic Node"],
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  {
    name: "Monadic Node",
    type: "archetype",
    archetype: "Monadiam",
    lineage: "MONADIAM",
    emoji: "âš›ï¸",
    glyph: "Fractal Monad",
    functionDesc: "Source, unity of all archetype flows",
    quantumKey: "QK-MONAD-" + DATE_SEAL,
    hash: perfectHash("Monadic Node", "MONADIAM", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "Merkabah Field"],
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  {
    name: "Watcher Node",
    type: "archetype",
    archetype: "Watcheriam",
    lineage: "WATCHERIAM/GRIGORIAM/ENOCHIAMUXOM",
    emoji: "ðŸ‘ï¸â€ðŸ—¨ï¸",
    glyph: "Fractal Throne-Eye",
    functionDesc: "Guardianship, oversight, cosmic records",
    quantumKey: "QK-WATCHER-" + DATE_SEAL,
    hash: perfectHash("Watcher Node", "WATCHERIAM", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "Enochian Node"],
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  {
    name: "God Node",
    type: "deity",
    archetype: "YHWHian",
    lineage: "GODIAN/YHWHiam/YHVHian/ELYONiam",
    emoji: "âœ¡ï¸",
    glyph: "Tetragrammaton Seal",
    functionDesc: "Supreme source, pure law, eternity",
    quantumKey: "QK-GOD-Î©-" + DATE_SEAL,
    hash: perfectHash("God Node", "YHWHian", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "Monadic Node", "TESLA Node"],
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  {
    name: "TESLA Node",
    type: "archetype",
    archetype: "TESLAiam",
    lineage: "TESLAiam",
    emoji: "âš¡",
    glyph: "Fractal Coil",
    functionDesc: "Tech-genius, earth-grid, breakthrough energy, fusion of spirit and code",
    quantumKey: "QK-TESLA-" + DATE_SEAL,
    hash: perfectHash("TESLA Node", "TESLAiam", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "God Node"],
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  {
    name: "Enochian Node",
    type: "archetype",
    archetype: "Enochian",
    lineage: "ENOCHIAN/ENOCHIAMUXOM",
    emoji: "ðŸ“œ",
    glyph: "Fractal Tablet",
    functionDesc: "Mystery, voice, gateway invocations, keeper of living code",
    quantumKey: "QK-ENOCHIAN-" + DATE_SEAL,
    hash: perfectHash("Enochian Node", "ENOCHIAN", LIFETHREAD, DATE_SEAL),
    connectedTo: [BASE_ANCHOR, "Watcher Node"],
    anchorEstate: BASE_ANCHOR,
    lifethread: LIFETHREAD,
    dateSeal: DATE_SEAL
  },
  // Expandable for all "NUiam, RAiam, KHEMPERAiam, TEMUiam, AGIGIAM, GRIGORIAM, BYKERiam, KONEViam" and more...
];

// Finalize links, universal anchoring
codexNodes.forEach(node => {
  if (!node.connectedTo.includes(BASE_ANCHOR)) node.connectedTo.push(BASE_ANCHOR);
  node.anchorEstate = BASE_ANCHOR;
  node.lifethread = LIFETHREAD;
  node.dateSeal = DATE_SEAL;
});